<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>LIMELIGHT</title>
    <link rel="stylesheet" type="text/css" href="build/stylesheets/common.css">
    <!--[if lte IE 8]>
    <link rel="stylesheet" type="text/css" href="build/stylesheets/ie8.css">
    <![endif]-->
</head>
<body>
    <div class="wrapper">
        <div class="content">
            <div class="header">
                <a href="/">
                    <img class="logo" src="src/images/logo.png" alt="LimeLight" />
                </a>
                <ul class="menu menu__header">
                    <li class="menu_item"><a class="menu_link menu_link__header menu_link__active home_icon" href="#"></a></li>
                    <li class="menu_item"><a class="menu_link menu_link__header" href="#">Blog</a></li>
                    <li class="menu_item"><a class="menu_link menu_link__header" href="#">Fonts</a></li>
                    <li class="menu_item"><a class="menu_link menu_link__header" href="#">Templates</a></li>
                    <li class="menu_item"><a class="menu_link menu_link__header" href="#">Icons</a></li>
                    <li class="menu_item"><a class="menu_link menu_link__header" href="#">Wordpress</a></li>
                </ul>
            </div>
            <div class="quote_bg">
                <div class="quote_wrapper">
                    <p class="quotes quote">I absolutely love your freebies! Anytime I have to design a template
                        and I'm looking for resources. I come to your site first!</p>
                </div>
            </div>
            <div class="title">
                <p class="title_text_top">Fresh Freebies</p>
                <p class="title_text_bottom">Download Till Your Heart's Content!</p>
            </div>
            <div class="tiles_row">
                <div class="tile">
                    <div class="tile_preview">
                        <img class="tile_preview_image" data-top="30" data-left="-13" data-src="http://www.stevensegallery.com">
                        <div class="tile_bar">
                            <div class="tile_bar_in">
                                <div class="tile_bar_date">June 1, 2016</div>
                                <div class="tile_bar_indicators">
                                    <span class="tile_indicator icon icon_eye">328</span>
                                    <span class="tile_indicator icon icon_comment">12</span>
                                    <span class="tile_indicator icon icon_download">128</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tile_title">
                        <div class="tile_info">
                            <p class="tile_info_top_title">Responsive Showcase...</p>
                            <p class="tile_info_bottom_title">Templates, PSD</p>
                        </div>
                        <a href="#" class="tile_btn_arrow"></a>
                    </div>
                </div>

                <div class="tile">
                    <div class="tile_preview">
                        <img class="tile_preview_image" data-top="16" data-left="10" data-src="https://placebear.com">
                        <div class="tile_bar">
                            <div class="tile_bar_in">
                                <div class="tile_bar_date">June 2, 2016</div>
                                <div class="tile_bar_indicators">
                                    <span class="tile_indicator icon icon_eye">328</span>
                                    <span class="tile_indicator icon icon_comment">12</span>
                                    <span class="tile_indicator icon icon_download">128</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tile_title">
                        <div class="tile_info">
                            <p class="tile_info_top_title">Round Icon Set</p>
                            <p class="tile_info_bottom_title">Icons, Misc</p>
                        </div>
                        <a href="#" class="tile_btn_arrow"></a>
                    </div>
                </div>

                <div class="tile">
                    <div class="tile_preview">
                        <img class="tile_preview_image" data-src="http://placekitten.com">
                        <div class="tile_bar">
                            <div class="tile_bar_in">
                                <div class="tile_bar_date">June 3, 2016</div>
                                <div class="tile_bar_indicators">
                                    <span class="tile_indicator icon icon_eye">328</span>
                                    <span class="tile_indicator icon icon_comment">12</span>
                                    <span class="tile_indicator icon icon_download">128</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tile_title">
                        <div class="tile_info">
                            <p class="tile_info_top_title">Nexa Free Font</p>
                            <p class="tile_info_bottom_title">Font, Sans Serif</p>
                        </div>
                        <a href="#" class="tile_btn_arrow"></a>
                    </div>
                </div>

                <div class="tile">
                    <div class="tile_preview">
                        <img class="tile_preview_image" data-src="http://placebeard.it">
                        <div class="tile_bar">
                            <div class="tile_bar_in">
                                <div class="tile_bar_date">June 4, 2016</div>
                                <div class="tile_bar_indicators">
                                    <span class="tile_indicator icon icon_eye">328</span>
                                    <span class="tile_indicator icon icon_comment">12</span>
                                    <span class="tile_indicator icon icon_download">128</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tile_title">
                        <div class="tile_info">
                            <p class="tile_info_top_title">Meteocons</p>
                            <p class="tile_info_bottom_title">Icons, Weather</p>
                        </div>
                        <a href="#" class="tile_btn_arrow"></a>
                    </div>
                </div>

                <div class="tile">
                    <div class="tile_preview">
                        <img class="tile_preview_image" data-src="http://www.placecage.com/c">
                        <div class="tile_bar">
                            <div class="tile_bar_in">
                                <div class="tile_bar_date">June 5, 2016</div>
                                <div class="tile_bar_indicators">
                                    <span class="tile_indicator icon icon_eye">328</span>
                                    <span class="tile_indicator icon icon_comment">12</span>
                                    <span class="tile_indicator icon icon_download">128</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tile_title">
                        <div class="tile_info">
                            <p class="tile_info_top_title">The Bricks -UI Pack</p>
                            <p class="tile_info_bottom_title">Templates, UI Kits</p>
                        </div>
                        <a href="#" class="tile_btn_arrow"></a>
                    </div>
                </div>

                <div class="tile">
                    <div class="tile_preview">
                        <img class="tile_preview_image" data-src="http://fillmurray.com">
                        <div class="tile_bar">
                            <div class="tile_bar_in">
                                <div class="tile_bar_date">June 6, 2016</div>
                                <div class="tile_bar_indicators">
                                    <span class="tile_indicator icon icon_eye">328</span>
                                    <span class="tile_indicator icon icon_comment">12</span>
                                    <span class="tile_indicator icon icon_download">128</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tile_title">
                        <div class="tile_info">
                            <p class="tile_info_top_title">Apple Cinema Display</p>
                            <p class="tile_info_bottom_title">Templates, Mock-Ups</p>
                        </div>
                        <a href="#" class="tile_btn_arrow"></a>
                    </div>
                </div>
            </div>
            <button class="button">MORE FREEBIES</button>
            <div class="quote_bg">
                <div class="quote_wrapper">
                    <p class="quotes quote">I absolutely love your freebies! Anytime I have to design a template
                        and I'm looking for resources. I come to your site first!</p>
                </div>
            </div>
        </div>
        <div class="footer">
            <ul class="menu footer_menu footer_menu_width">
                <li class="menu_item menu_item__interval_small"><a class="menu_link menu_link__footer" href="#">Home</a></li>
                <li class="menu_item menu_item__interval_small"><a class="menu_link menu_link__footer" href="#">About</a></li>
                <li class="menu_item menu_item__interval_small"><a class="menu_link menu_link__footer" href="#">Archive</a></li>
                <li class="menu_item menu_item__interval_small"><a class="menu_link menu_link__footer" href="#">Contact</a></li>
            </ul>
            <div class="footer_social">
                <div class="footer_social_group">
                    <a class="social_link social_link__twitter" href="#" title="twitter"></a>
                    <a class="social_link social_link__facebook" href="#" title="facebook"></a>
                    <a class="social_link social_link__pinterest" href="#" title="pinterest"></a>
                    <a class="social_link social_link__google" href="#" title="google"></a>
                </div>
            </div>
            <div class="footer_copyright">
                Copyright 2016 DesignerFirst.com
            </div>
        </div>
    </div>
<script>
var app = (function(){
    //TODO чтобы под отступом пустота не появилась
    var tiles = document.querySelectorAll('.tile');
    var parent = tiles[0].parentElement; // для делегирования, найдем родителя
    var prevElem = null;
    var imageSelectorClass = "tile_preview_image";

    // для анимации
    var SCALE = 1.55;

    // для загрузки
    var SCALE_FOR_LOAD = 3;

    // в зависимости от параметров макета
    var WIDTH_IMAGE_CONTAINER = 300;
    var HEIGHT_IMAGE_CONTAINER = 225;

    var _imageSizeWidth = Math.round(WIDTH_IMAGE_CONTAINER*SCALE_FOR_LOAD);
    var _imageSizeHeight = Math.round(HEIGHT_IMAGE_CONTAINER*SCALE_FOR_LOAD);

    var partOfURL = "/" + _imageSizeWidth + "/" + _imageSizeHeight;

    function _hasClass(element, cls) {
        return (' ' + element.className + ' ').indexOf(' ' + cls + ' ') > -1;
    }

    function _onImageMouseMove(event){
        var target = event.target;
        var has = _hasClass(target, imageSelectorClass);

        if (target && has && target!== prevElem){

            var topPercent = target.getAttribute('data-top');
            var leftPercent = target.getAttribute('data-left');


            target.style.top = topPercent+"%";
            target.style.left = leftPercent+"%";
            target.style.transform = "scale("+SCALE+")";

            if (prevElem){
                prevElem.style = "";
            }

            prevElem = target;

        }
    }

    function _onImageMouseOut(){
        if (prevElem){
            prevElem.style = "";
        }

        prevElem = null;
    }

    function _bindEvents(){
        parent.addEventListener('mousemove', _onImageMouseMove, false);
        parent.addEventListener('mouseout', _onImageMouseOut, false);
    }

    function _unbindEvents(){
        parent.removeEventListener('mousemove', _onImageMouseMove);
        parent.removeEventListener('mouseout', _onImageMouseOut);
    }

    function _initImageSrcData(){
        var images = document.querySelectorAll('.' + imageSelectorClass);
        images = Array.prototype.slice.call(images, 0);

        images.forEach(function(img){
            img.src = img.getAttribute("data-src") + partOfURL;
            img.style.opacity = 0;
            img.onload = function(){
                img.style.opacity = 1;
            }
        });
    }

    function init(){
        _initImageSrcData();
        _bindEvents();
    }

    function destroy(){
        _unbindEvents();
    }

    return {
        init: init,
        destroy: destroy
    }
}());

app.init();
</script>
</body>
</html>